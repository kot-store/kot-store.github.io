<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:title" content="KotOS">
    <meta property="og:url" content="https://kot-store.github.io/">
    <meta property="og:description" content="Kot is nothing more than Operating System running on x86-64. And you already know that, but we're making to turn Kot more than just something.">
    <meta property="og:image" content="https://kot-org.github.io/assets/img/kot-laptop.png">
    
    <link rel="shortcut icon" href="kot-logo.png" type="image/x-icon">

    <link rel="stylesheet" href="https://kot-org.github.io/assets/css/style.min.css">
    <link rel="stylesheet" href="https://kot-org.github.io/assets/css/components.min.css">

    <link rel="stylesheet" href="https://kot-org.github.io/assets/css/routes/home.min.css">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kot Store</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="he-e1">
        <div id="he-e1e1">
            <div id="he-e1e1-e1">
                <div id="header-logo"></div>
            </div>
        </div>
    </div>

  <main>
    <section class="app-list">

    </section>
  </main>

    <footer>
        <img src="https://kot-org.github.io/assets/img/kot-logo-mini.png" alt="Kot logo">
        <span>Copyright Â© <script>document.write(new Date().getFullYear())</script> Kot organization.</span>
        <span>All rights reserved.</span>
    </footer>

    <script>
        function createElement(tag, attrs, content){
            const el = document.createElement(tag);
            for (const attr in attrs) {
                el.setAttribute(attr, attrs[attr]);
            }
            if (content) {
                el.textContent = content;
            }
            return el;
        }

        function displayApp(app){
            const appDiv = createElement('div', { class: 'app-card' });

            const urlEmojiRequest = "https://api.emojisworld.fr/v1/search?limit=1&q=" + app.name;
            const urlEmojiRequestResponse = await fetch(urlEmojiRequest);
            const emoji = urlEmojiRequestResponse.results[0].emoji;

            const nameH2 = createElement('h2', null, emoji + app.name + emoji);
            appDiv.appendChild(nameH2);

            const descriptionP = createElement('p', null, app.description);
            appDiv.appendChild(descriptionP);

            const tagsP = createElement('p', { class: 'tags' });
            appDiv.appendChild(tagsP);

            const tagList = createElement('ul', null);
            tagsP.appendChild(tagList);

            for(const tag of app.tags){
                const tagLi = createElement('li', null, tag);
                tagList.appendChild(tagLi);
            }

            const linkA = createElement('a', { href:  "app.html?url=" + encodeURIComponent(app.json_link) }, 'More Info');
            appDiv.appendChild(linkA);

            const appList = document.querySelector('.app-list');
            appList.appendChild(appDiv);
        }

        async function loadApps() {
            const response = await fetch('https://kot-store.github.io/apps/');
            const json = await response.json();
            for (const app of json.applications) {
                displayApp(app);
            }
        }

        loadApps();
    </script>
</body>
</html>
